{{ define "main" }}
  <!-- Page Header -->
  {{ with .Params.header }}
    <section class="section bg-theme-light dark:bg-darkmode-theme-light">
      <div class="container">
        <div class="row justify-center">
          <div class="lg:col-8 text-center">
            <h1 class="mb-4">{{ .title }}</h1>
            <p class="text-lg text-text">{{ .subtitle }}</p>
          </div>
        </div>
      </div>
    </section>
  {{ end }}

  <!-- Service Categories Grid -->
  {{ with .Params.categories }}
    <section class="section">
      <div class="container">
        <div class="row">
          {{ range . }}
            <div class="lg:col-6 mb-8">
              <div class="bg-body dark:bg-darkmode-body border border-border dark:border-darkmode-border rounded-lg p-8 h-full">
                <div class="flex items-start gap-4 mb-6">
                  <div class="flex-shrink-0 w-14 h-14 bg-primary/10 rounded-lg flex items-center justify-center">
                    <i class="{{ .icon }} text-primary text-2xl"></i>
                  </div>
                  <div>
                    <h2 class="h4 mb-2">{{ .title }}</h2>
                    <p class="text-text">{{ .description }}</p>
                  </div>
                </div>
                <ul class="mb-6 space-y-2">
                  {{ range .services }}
                    <li class="flex items-center gap-2 text-sm">
                      <i class="fa-solid fa-check text-primary text-xs"></i>
                      <span>{{ . }}</span>
                    </li>
                  {{ end }}
                </ul>
                <a href="{{ .link | absURL }}" class="btn btn-outline-primary btn-sm">
                  Learn More
                  <i class="fa fa-arrow-right pl-2"></i>
                </a>
              </div>
            </div>
          {{ end }}
        </div>
      </div>
    </section>
  {{ end }}

  <!-- How We Work -->
  {{ with .Params.engagement }}
    <section class="section bg-theme-light dark:bg-darkmode-theme-light">
      <div class="container">
        <div class="row justify-center mb-12">
          <div class="lg:col-8 text-center">
            <h2 class="mb-4">{{ .title }}</h2>
            <p class="text-lg text-text">{{ .description }}</p>
          </div>
        </div>
        <div class="row">
          {{ range $i, $step := .steps }}
            <div class="md:col-6 lg:col-3 mb-8">
              <div class="text-center">
                <div class="relative mb-6">
                  <div class="mx-auto w-16 h-16 bg-primary text-white rounded-full flex items-center justify-center text-xl font-bold">
                    {{ add $i 1 }}
                  </div>
                  {{ if lt $i 3 }}
                    <div class="hidden lg:block absolute top-1/2 left-full w-full h-0.5 bg-border dark:bg-darkmode-border -translate-y-1/2"></div>
                  {{ end }}
                </div>
                <h3 class="h5 mb-3">{{ $step.title }}</h3>
                <p class="text-sm text-text">{{ $step.description }}</p>
              </div>
            </div>
          {{ end }}
        </div>
      </div>
    </section>
  {{ end }}

  <!-- Content -->
  {{ if .Content }}
    <section class="section">
      <div class="container">
        <div class="row justify-center">
          <div class="lg:col-10">
            <div class="content">
              {{ .Content }}
            </div>
          </div>
        </div>
      </div>
    </section>
  {{ end }}

  <!-- CTA -->
  <section class="section bg-primary">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-8 text-center text-white">
          <h2 class="mb-4 text-white">Ready to Get Started?</h2>
          <p class="mb-8 text-white/80">Tell us about your project and we'll schedule a discovery call to understand your needs.</p>
          <a href="{{ "contact/" | absURL }}" class="btn bg-white text-primary hover:bg-white/90">
            Contact Us
            <i class="fa fa-arrow-right pl-2"></i>
          </a>
        </div>
      </div>
    </div>
  </section>
{{ end }}
